<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <!--   <script>
      document.cookie = "witcher=Geralt; SameSite=None; Secure"
      alert( document.cookie );
  </script> -->
    <script src="https://www.gstatic.com/firebasejs/8.3.1/firebase-app.js"></script>

<!-- TODO: Add SDKs for Firebase products that you want to use
     https://firebase.google.com/docs/web/setup#available-libraries -->

<script src="https://www.gstatic.com/firebasejs/8.3.1/firebase-analytics.js"></script>
<script src="https://www.gstatic.com/firebasejs/8.3.1/firebase-auth.js"></script>
<script src="https://www.gstatic.com/firebasejs/8.3.1/firebase-database.js"></script>



<script>
  // Your web app's Firebase configuration
  // For Firebase JS SDK v7.20.0 and later, measurementId is optional
  var firebaseConfig = {
    apiKey: "AIzaSyAGsfdkjppVjAnFoP2lk8PLaiwbKdnSg08",
    authDomain: "shopp-8ef5d.firebaseapp.com",
    databaseURL: "https://shopp-8ef5d-default-rtdb.firebaseio.com",
    projectId: "shopp-8ef5d",
    storageBucket: "shopp-8ef5d.appspot.com",
    messagingSenderId: "1056813294814",
    appId: "1:1056813294814:web:f60458b13a529cff750e4f",
    measurementId: "G-WEJRNFBKD4"
  };
  // Initialize Firebase
  firebase.initializeApp(firebaseConfig);
  firebase.analytics();
</script>


<!-- UIkit CSS -->
<script src="//cdnjs.cloudflare.com/ajax/libs/list.js/2.3.1/list.min.js"></script>
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/uikit@3.6.18/dist/css/uikit.min.css" />
<link rel="stylesheet" href="https://unpkg.com/leaflet@1.7.1/dist/leaflet.css"
integrity="sha512-xodZBNTC5n17Xt2atTPuE1HxjVMSvLVW9ocqUKLsCC5CXdbqCmblAshOMAS6/keqq/sMZMZ19scR4PsZChSR7A=="
crossorigin=""/>
<script src="https://unpkg.com/leaflet@1.7.1/dist/leaflet.js"
   integrity="sha512-XQoYMqMTK8LvdxXYG3nZ448hOEQiglfqkJs1NOQV44cWnUrBc8PkAOcXy20w0vlaXaVUearIOBhiXZ5V3ynxwA=="
   crossorigin=""></script>
<!-- UIkit JS -->
<link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
<script src="https://cdn.jsdelivr.net/npm/uikit@3.6.18/dist/js/uikit.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/uikit@3.6.18/dist/js/uikit-icons.min.js"></script>



    <!-- Compiled and minified CSS -->
   <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/materialize/1.0.0/css/materialize.min.css"> 

    <!-- Compiled and minified JavaScript -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/materialize/1.0.0/js/materialize.min.js"></script>
    
    <title id="title">Dashboard</title>
    <script src="js/dash.js"></script>
    <script src="js/hide.js"></script>
    <script src="js/index.js"></script>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/uikit@3.6.18/dist/css/uikit.min.css" />
    <link rel="stylesheet" href="css/style.css">
    
</head>
<body onload="hide.search()" >
    <nav class="z-depth-0">
        <div class="nav-wrapper z-depth-0" >
          <a href="Dash.html" id="logo" class="brand-logo center uk-animation-fade" style="text-align: center;">Ge0tagger</a>
         
          <a id="ham" href="#" data-target="mobile-links" class="sidenav-trigger uk-animation-fade  "><i class="material-icons">menu</i></a>
          <ul id="nav-mobile" class="right ">
            
            <li ><a id="search" href="#"  uk-toggle><i class="material-icons uk-animation-fade" onclick="hide.whilesearch()" >search</i></a></li>
            
          </ul>
          <div id="nav-set" class=" brand-logo center uk-search uk-search-medium">
            <input id="sea" style="padding: 1% 6%;
            box-sizing: border-box;
           -webkit-box-sizing: border-box;
           -moz-box-sizing: border-box;
           border:1px solid #BEBEBE;
           -webkit-transition: all 0.30s ease-in-out;
           -moz-transition: all 0.30s ease-in-out;
           -ms-transition: all 0.30s ease-in-out;
           -o-transition: all 0.30s ease-in-out;
           outline: none;  
           height: 33px; -moz-box-shadow: 0 0 8px #000000;
    -webkit-box-shadow: 0 0 8px #ffffff;
    box-shadow: 0 0 8px rgba(0, 0, 0, 0);
    border: 1px solid rgba(0, 0, 0, 0);
    color: #000000;
    font-family: 'Montserrat';
    margin-right: 50%; 
    border-radius: 10px;
    text-align: center;
    padding-top: 3vw;
    width: 100%; " class="  uk-search-input uk-animation-fade" type="search" placeholder="Search">
          </div>
        </div>
      </nav>
     

  <ul id="mobile-links" class="sidenav ">
    <li><div class="user-view">
      <div class="background">
        
      </div>
      <a href="#user"><img class="circle" src="images/yuna.jpg"></a>
      <a href="#name"><span id="infoname" class="white-text name"></span></a>
      <a href="#email"><span id="infoemail" class="white-text email"></span></a>
    </div></li>
    <li><a href="Problem.html">Search Problems</a></li>
    <li><a href="Setting.html">Settings</a></li>
    
    <li><a onclick="login.logout()" class="waves-effect" href="#">Log Out</a></li>
</ul>
  
    <h1 id='welcome'>welcome back</h1>
    <!-- <div id="aligned">
      <span uk-search-icon></span><form class="uk-search uk-search-small">
      
      <input class="uk-search-input" type="search" placeholder="Search">
  </form></div> -->
   

    
    
    <div class="uk-position-relative uk-light" uk-slideshow>

      <ul class=>
         
          <li class="uk-card uk-card-default uk-card-body uk-width-1-1@m">
            <h2 id="logo" class="brand-logo center">My List</h2>
            <input id="lister" style="padding: 1% 6%;
            box-sizing: border-box;
           -webkit-box-sizing: border-box;
           -moz-box-sizing: border-box;
           border:1px solid #BEBEBE;
           -webkit-transition: all 0.30s ease-in-out;
           -moz-transition: all 0.30s ease-in-out;
           -ms-transition: all 0.30s ease-in-out;
           -o-transition: all 0.30s ease-in-out;
           outline: none;  
           -moz-box-shadow: 0 0 8px #000000;
    -webkit-box-shadow: 0 0 8px #000000;
    box-shadow: 0 0 8px rgba(0, 0, 0, 0);
    border: 1px solid rgba(0, 0, 0, 0);
    color: #000000;
    font-family: 'Montserrat';
    margin-right: 50%; 
    border-radius: 15px;
    text-align: center;
    padding: 3vw;
    transform: border 1s;
    
    width: 100%; " class="  uk-search-input uk-animation-fade" type="search" placeholder="Add An Item">
            
              <button style="padding:.1%;" id="add item">+</button>
              <ul onscroll="hide.checklist()"  id="itemlist"></ul>
          </li>
          <li id="mapc" class="uk-card uk-card-default uk-card-body uk-width-1-1@m">
           
            <div onload="" id="mapid" uk-cover></div>
          </li>
          <li class="uk-card uk-card-default uk-card-body uk-width-1-1@m">
           <h2 id="logo" class="brand-logo center">Find your items</h2> 
           <button style="padding:.1%; margin: 0 auto;" id="add item">Let's Go</button>
          </li>
      </ul>
  
    

  
  </div>
  <script src="js/dash.js"></script>
<script type="text/javascript">



     
          

navigator.geolocation.getCurrentPosition(function(position) {
  var mymap = L.map('mapid',{ zoomControl: false, minZoom: 16 }).setView([position.coords.latitude, position.coords.longitude],0);

    L.tileLayer('https://api.maptiler.com/maps/streets/{z}/{x}/{y}.png?key=OjZZ4hlCy05Bf5ITef5N',{
        //attribution: '<a href="https://www.maptiler.com/copyright/" target="_blank">&copy; MapTiler</a> <a href="https://www.openstreetmap.org/copyright" target="_blank">&copy; OpenStreetMap contributors</a>'
    }).addTo(mymap);

    var mae = L.marker([position.coords.latitude,position.coords.longitude]).addTo(mymap);
    var id, target, option;
var long,lat
    var print = document.getElementById('print'); 
    console.log(position.coords.longitude);
     lat = position.coords.latitude;
     long =  position.coords.longitude;
    console.log(position.coords.latitude);
    mae.setLatLng([position.coords.latitude,position.coords.longitude]);
    print.innerText = "longitude: " + position.coords.longitude + "latitude: " + position.coords.latitude;
});
function success(pos) {
  var crd = pos.coords;
 var latlng = [crd.latitude,crd.longitude]
  navigator.geolocation.getCurrentPosition(function(position) {
    var print = document.getElementById('print'); 
    console.log(crd.longitude);
     lat = crd.latitude;
     long =  crd.longitude;
    console.log(crd.latitude);
    mae.setLatLng(latlng);
    // print.innerText ="longitude: " + position.coords.longitude + "latitude: " + position.coords.latitude;
});
};

function error(err) {
  console.warn('ERROR(' + err.code + '): ' + err.message);
};

target = {
  latitude : lat,
  longitude: long,
}

options = {
  enableHighAccuracy: true,
  timeout: 5000,
  maximumAge: 0
};

id = navigator.geolocation.watchPosition(success, error, options); 
    setTimeout(myFunction, 5000);
    function myFunction() {
        mymap.panTo([position.coords.latitude,position.coords.longitude]);
        ref = firebase.database().ref().child('locations');
        ref.once("value", snap=> {
        snap.forEach(r=>{
           
            console.log(r.val().log);
           
            var circle = L.circle([r.val().lat,r.val().long], {
    color: 'red',
    fillColor: '#f03',
    fillOpacity: 0.5,
    radius: 500
}).addTo(mymap);
        });
    });

        

      
        
    
    }

function showError(error) {
    switch (error.code) {
        case error.PERMISSION_DENIED:
            x.innerHTML = "User denied the request for Geolocation."
            break;
        case error.POSITION_UNAVAILABLE:
            x.innerHTML = "Location information is unavailable."
            break;
        case error.TIMEOUT:
            x.innerHTML = "The request to get user location timed out."
            break;
        case error.UNKNOWN_ERROR:
            x.innerHTML = "An unknown error occurred."
            break;
    }
}



    </script> 
   
 
</body>
</html>